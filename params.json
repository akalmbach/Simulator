{"name":"Simulator","tagline":"","body":"#Simulator\r\n\r\n\r\nThis branch contains the alpha release of the simulator.\r\n\r\nIt contains the following functionalities-:\r\n\r\n- Spawn Spiri in Gazebo with a choice of a world\r\n\r\n- Publish sensor data on individual topics.\r\n\r\n- Control Spiri in the simulator by a joystick.\r\n\r\nThe code has been tested on ROS Hydro and Ubuntu 12.04\r\n\r\n## Installation instructions\r\n\r\n### Install using a script\r\n\r\n```bash\r\nwget https://raw.github.com/Pleiades-Spiri/Spiri_Public/installation_simulator/installation.sh\r\nchmod +x installation.sh\r\n./installation.sh\r\n```\r\n\r\nThis will install ROS, create a ROS workspace as well as download the Simulator code.\r\n\r\nIt will require your password to install packages. \r\n\r\nJump to the command section.\r\n\r\n### Install different components independently \r\n\r\nIf you have installed using a script you dont need to do this. [commands](#Commands)\r\n\r\n- Install ROS\r\n\r\nhttp://wiki.ros.org/hydro/Installation/Ubuntu\r\n\r\nInstall the ros-desktop-full package as it contains Gazebo and other programs required for the simulator.\r\n\r\n- Install Gazebo sensor plugins\r\n\r\nsudo apt-get install ros-hydro-hector-quadrotor\r\n\r\n- Install the Controllers\r\n\r\nsudo apt-get install ros-hydro-ros-controllers\r\n\r\n- Install joystick drivers\r\n\r\nsudo apt-get install ros-hydro-joy\r\n\r\n- Create a ros workspace\r\n\r\nhttp://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment\r\n\r\nAfter this step there should be a folder called as catkin_ws\r\n\r\n- Get the Simulator\r\n\r\n```bash\r\ncd catkin_ws/src\r\n\r\nwget https://raw.github.com/Pleiades-Spiri/Spiri_Public/installation_simulator/Simulator-1.0.tar.gz\r\n\r\ntar -zxvf Simulator-1.0.tar.gz \r\n\r\nmv Simulator-1.0 ./Simulator\r\n\r\ncd ..\r\n\r\ncatkin_make\r\n\r\necho \"export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:~/catkin_ws/src/Simulator/spiri_description/models\" >> ~/.bashrc\r\n\r\nsource ~/.bashrc\r\n```\r\n\r\nThese commands will build the code required for the Simulator.\r\n\r\nMake sure these commands are in your bashrc\r\n```bash\r\n\r\nnano ~/.bashrc\r\n\r\nsource ~/catkin_ws/devel/setup.bash\r\n\r\nsource /opt/ros/hydro/setup.bash\r\n\r\nexport GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:~/catkin_ws/src/Simulator/spiri_description/models\r\n```\r\n\r\n### Commands\r\n\r\n\r\nTo launch Spiri in an empty world\r\n\r\n```bash\r\nroslaunch spiri_description spiri_empty_world.launch\r\n```\r\n\r\nTo launch Spiri in Citadel Hill\r\n\r\n```bash\r\nroslaunch spiri_description spiri_citadel.launch\r\n```\r\n\r\nControl Spiri with a joystick\r\n\r\nXbox controller \r\n\r\n```bash\r\nroslaunch spiri_teleop xbox_controller.launch\r\n```\r\n\r\nLogitech Gamepad\r\n\r\n```bash\r\nroslaunch spiri_teleop logitech_gamepad.launch\r\n```  \r\n\r\n\r\nScript to process the Depth Map\r\n\r\n```bash\r\nROS_NAMESPACE=stereo rosrun stereo_image_proc stereo_image_proc _approximate_sync:=True _queue_size:=10\r\n```\r\n\r\nView the Depth Map\r\n\r\n```bash\r\nrosrun image_view stereo_view stereo:=/stereo image:=image_rect_color _approximate_sync:=True _queue_size:=10\r\n```\r\n\r\nView the front left camera\r\n\r\n```bash\r\nrosrun image_view image_view image:=/stereo/left/image_raw\r\n```\r\n\r\nView the front right camera\r\n\r\n```bash\r\nrosrun image_view image_view image:=/stereo/right/image_raw\r\n```\r\n\r\nView the bottom facing camera\r\n\r\n```bash\r\nrosrun image_view image_view image:=/downward_cam/camera/image\r\n```\r\n\r\n## To visualize the robot and point cloud data in rviz\r\n\r\n```bash\r\nroscd spiri_description\r\n\r\nrosrun rviz rviz -d spiri_pointcloud.rviz\r\n```\r\n\r\n## Nodes\r\n\r\n### gazebo\r\nLaunches spiri in a world with all its sensors\r\n\r\n#### Subscribed topics \r\n\r\n- /cmd_vel\r\n- /wind\r\n#### Published Topics\r\n\r\n- /altimeter\r\n- /fix\r\n- /fix/pose\r\n- /ground_truth/state\r\n- /raw_imu\r\n- /pressure_height\r\n- /magnetic\r\n- /stereo/left/image_raw\r\n- /stereo/right/image_raw\r\n\r\n### quadrotor_teleop\r\nControl Spiri with joystick\r\n\r\n#### Subscribed topics\r\n\r\n- /joy\r\n\r\n#### Published topics\r\n\r\n- /cmd_vel\r\n\r\n\r\n## Troubleshooting\r\n\r\n### Error [ConnectionManager.cc:116] Failed to connect to master in 30 seconds\r\n\r\nThis is a known bug in Gazebo\r\n\r\nhttps://bitbucket.org/osrf/gazebo/issue/732/gazebo-never-starts-when-loading-models\r\n\r\nTo fix this do the following steps-:\r\n\r\n```bash\r\ncd catkin_ws/src\r\n\r\nhg clone https://bitbucket.org/osrf/gazebo_models\r\n\r\nAdd this command to your bashrc\r\n\r\nexport GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:~/catkin_ws/src/gazebo_models\r\n```\r\n\r\nRestart your terminal and it should fix the error\r\n\r\n## General ROS commands\r\n\r\nTo list all ROS topics\r\n\r\n```bash\r\nrostopic list\r\n```\r\n\r\nTo view any ROS topic \r\n```bash\r\nrostopic echo topic_name\r\n```\r\nFor example to view altimeter data\r\n\r\n```bash\r\nrostopic echo /altimeter\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}